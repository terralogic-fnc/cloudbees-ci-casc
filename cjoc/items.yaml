removeStrategy:
  items: SYNC
  rbac: SYNC

items:
  - kind: managedController
    name: mc-blue
    displayName: Blue Controller
    description: Blue environment controller

    groups:
      - name: BlueAdmins
        roles:
          - name: administer

    properties:
      - configurationAsCode:
          bundle: mc-blue

      - licensing:
          strategy:
            perUserLicensingStrategy: {}

      - healthReporting:
          enabled: true

    configuration:
      kubernetes:
        clusterEndpointId: default
        allowExternalAgents: false

        # âœ… HA + Autoscaling (CORRECT STRUCTURE)
        replication:
          config:
            replicas: 2                  # minimum replicas
            maxReplicas: 3               # scale up to 3
            targetCPUUtilizationPercentage: 70

        # Resources PER replica
        memory: 3072
        cpus: 1.0
        disk: 50
        fsGroup: "1000"

        # Stability / production defaults
        terminationGracePeriodSeconds: 1200
        readinessInitialDelaySeconds: 30
        readinessTimeoutSeconds: 5
        readinessFailureThreshold: 100
        livenessInitialDelaySeconds: 300
        livenessPeriodSeconds: 10
        livenessTimeoutSeconds: 10

        # URL path
        domain: blue
