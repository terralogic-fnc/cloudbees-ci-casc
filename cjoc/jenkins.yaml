jenkins:
  systemMessage: |
    CloudBees Operations Center
    Authentication: Keycloak (OIDC)
    Authorization: CloudBees RBAC (CasC enforced)

  # CJOC must NEVER run builds
  numExecutors: 0
  mode: NORMAL

  # -------------------------------------------------
  # OIDC Security Realm â€“ Keycloak
  # -------------------------------------------------
  securityRealm:
    oic:
      wellKnownOpenIDConfigurationUrl: https://keycloak.14.195.56.220.nip.io/realms/cloudbees/.well-known/openid-configuration
      clientId: cloudbees
      clientSecret: ${OIDC_CLIENT_SECRET}

      scopes: openid profile email
      userNameField: preferred_username
      userFullNameFieldName: name
      userEmailFieldName: email
      groupsFieldName: groups

      automaticUserCreation: true
      logoutFromOpenidProvider: true

  # -------------------------------------------------
  # REQUIRED: CloudBees RBAC via CasC
  # -------------------------------------------------
  authorizationStrategy: cloudBeesRoleBasedAccessControl

  crumbIssuer:
    standard:
      excludeClientIPFromCrumb: true

  disableRememberMe: true
  quietPeriod: 5
  scmCheckoutRetryCount: 0

  remotingSecurity:
    enabled: true

  slaveAgentPort: 50000

# -------------------------------------------------
# HARD SECURITY ENFORCEMENT (NO UI OVERRIDES)
# -------------------------------------------------
security:
  securitySettingsEnforcement:
    global:
      realmAndAuthorization:
        canCustomMapping: false
        canOverride: false
        defaultMappingFactory: restrictedEquivalentRAMF

  controllerExecutorCount:
    enforce:
      canOverride: false
      count: 0

# -------------------------------------------------
# CasC Server (CJOC)
# -------------------------------------------------
cloudBeesCasCServer:
  visibility: true
  defaultBundle: cjoc

# -------------------------------------------------
# AUTO-PROVISION CONTROLLERS (items.yaml)
# -------------------------------------------------
unclassified:
  cascAutoControllerProvisioning:
    provisionControllerOnCreation: true
    fireAndForget: true
    initialDelay: 15
    timeout: 600
    duration: 60

  location:
    url: https://cjoc.14.195.56.220.nip.io/
